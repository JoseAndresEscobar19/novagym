{% extends "main.html" %}
{% load static %}
{% load crispy_forms_tags %}
{% csrf_token %}
{% block specific_head %}
<link rel="stylesheet" href="{% static 'css/external/bootstrap4-toggle.min.css' %}">
<link rel="stylesheet" href="{% static 'css/external/daterangepicker.css' %}">
<link rel="stylesheet" href="{% static 'css/list.css' %}">
{% endblock specific_head %}

{% block main %}
<div class="row mt-4">
  <div class="col">
    <h2 class="text-left">{{title}}</h2>
  </div>
  <hr>
</div>
<div class="col-3">

  <form action="{% url 'calendario:listar' %}" method="get">
    <select class="form-control" name="sucursales" id="sucursales">
      <option value="inicial" selected disabled>Seleccione un gimnasio</option>
      {% if gimnasios %}
      {% for gimnasio in gimnasios %}
      <option value="{{ gimnasio.id }}">{{ gimnasio.nombre }} - {{ gimnasio.ciudad }}</option>
      {% endfor %}
      {% else %}
      <option value="Sin datos" selected disabled>Sin datos</option>
      {% endif %}
    </select>
    <div class="d-flex justify-content-end">
      <input style="margin-top: 1%;" class="btn btn-primary" type="submit" value="Filtrar" />
    </div>
  </form>


</div>
<div class="col-12 d-flex justify-content-end">
  <a class="btn btn-sm btn-warning" id="menu" href="{% url 'calendario:listarZona' %}">
    <i class="fa fa-calendar-plus"></i> Ver zonas</a>
  <a class="btn btn-sm btn-warning" id="menu" href="{% url 'calendario:crear' %}">
    <i class="fa fa-calendar-plus"></i> Agregar actividad</a>
</div>
<div class="row mt-4">
  <div class="col-12 table-container" id="accordionContainer">
    {% csrf_token %}
    <div class="accordion" id="accordionExample">
      <div class="card">
        <div class="card-header" id="headingOne">
          <h2 class="mb-0">
            <button class="btn btn-link btn-block text-left" type="button" data-toggle="collapse"
              data-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
              Lunes
            </button>
          </h2>
        </div>

        <div id="collapseOne" class="collapse show" aria-labelledby="headingOne" data-parent="#accordionExample">
          <div class="card-body">
            <table class="table table-responsive-lg table-condensed table-hover text-center" id="tabla-sponsor">
              <thead class="thead-light">
                <tr>
                  <th scope="col">Horario</th>
                  <th scope="col">Actividad</th>
                  <th scope="col">Capacidad</th>
                  <th scope="col">Acciones</th>
                </tr>
              </thead>
              <tr>
                {% if page_obj %}
                {% for calendario in page_obj %}
                {% if calendario.dia == "LUNES" %}
              <tr class="text-center">
                <td>{{calendario.horario_inicio}} - {{calendario.horario_fin}}</td>
                <td>{{calendario.nombre}}</td>
                <td>Reservas: {{calendario.asistentes}}/{{calendario.capacidad}}</td>
                <td>
                  <a href="{% url 'calendario:editar' calendario.id %}" class="btn btn-sm btn-primary">
                    <i class="fas fa-edit "></i></a>
                  <a class="btn btn-sm btn-danger use-modal" data-toggle='modal' data-target="#mainModal"
                    data-url="{% url 'calendario:eliminar' calendario.id %}" href="#">
                    <i class="fas fa-times "></i></a>
                </td>
              </tr>
              {% endif %}
              {% endfor %}
              {% else %}
              <td>
                <h4>
                  Seleccione un gimnasio para mostrar información.
                </h4>
              </td>

              {% endif %}
              </tr>
            </table>
          </div>
        </div>
      </div>
      <div class="card">
        <div class="card-header" id="headingTwo">
          <h2 class="mb-0">
            <button class="btn btn-link btn-block text-left collapsed" type="button" data-toggle="collapse"
              data-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
              Martes
            </button>
          </h2>
        </div>
        <div id="collapseTwo" class="collapse" aria-labelledby="headingTwo" data-parent="#accordionExample">
          <div class="card-body">
            <table class="table table-responsive-lg table-condensed table-hover text-center" id="tabla-sponsor">
              <thead class="thead-light">
                <tr>
                  <th scope="col">Horario</th>
                  <th scope="col">Actividad</th>
                  <th scope="col">Capacidad</th>
                  <th scope="col">Acciones</th>
                </tr>
              </thead>
              <tr>
                {% if page_obj %}
                {% for calendario in page_obj %}
                {% if calendario.dia == "MARTES" %}
              <tr class="text-center">
                <td>{{calendario.horario_inicio}} - {{calendario.horario_fin}}</td>
                <td>{{calendario.nombre}}</td>
                <td>{{calendario.descripcion}}</td>
                <td>
                  <a href="{% url 'calendario:editar' calendario.id %}" class="btn btn-sm btn-primary">
                    <i class="fas fa-edit "></i></a>
                  <a class="btn btn-sm btn-danger use-modal" data-toggle='modal' data-target="#mainModal"
                    data-url="{% url 'calendario:eliminar' calendario.id %}" href="#">
                    <i class="fas fa-times "></i></a>
                </td>
              </tr>
              {% endif %}
              {% endfor %}
              {% else %}
              <td>
                <h4>
                  Seleccione un gimnasio para mostrar información.
                </h4>
              </td>

              {% endif %}
              </tr>
            </table>
          </div>
        </div>
      </div>
      <div class="card">
        <div class="card-header" id="headingThree">
          <h2 class="mb-0">
            <button class="btn btn-link btn-block text-left collapsed" type="button" data-toggle="collapse"
              data-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
              Miércoles
            </button>
          </h2>
        </div>
        <div id="collapseThree" class="collapse" aria-labelledby="headingThree" data-parent="#accordionExample">
          <div class="card-body">
            <table class="table table-responsive-lg table-condensed table-hover text-center" id="tabla-sponsor">
              <thead class="thead-light">
                <tr>
                  <th scope="col">Horario</th>
                  <th scope="col">Actividad</th>
                  <th scope="col">Capacidad</th>
                  <th scope="col">Acciones</th>
                </tr>
              </thead>
              <tr>
                {% if page_obj %}
                {% for calendario in page_obj %}
                {% if calendario.dia == "MIERCOLES" %}
              <tr class="text-center">
                <td>{{calendario.horario_inicio}} - {{calendario.horario_fin}}</td>
                <td>{{calendario.nombre}}</td>
                <td>{{calendario.descripcion}}</td>
                <td>
                  <a href="{% url 'calendario:editar' calendario.id %}" class="btn btn-sm btn-primary">
                    <i class="fas fa-edit "></i></a>
                  <a class="btn btn-sm btn-danger use-modal" data-toggle='modal' data-target="#mainModal"
                    data-url="{% url 'calendario:eliminar' calendario.id %}" href="#">
                    <i class="fas fa-times "></i></a>
                </td>
              </tr>
              {% endif %}
              {% endfor %}
              {% else %}
              <td>
                <h4>
                  Seleccione un gimnasio para mostrar información.
                </h4>
              </td>

              {% endif %}
              </tr>
            </table>
          </div>
        </div>
      </div>
      <div class="card">
        <div class="card-header" id="headingFour">
          <h2 class="mb-0">
            <button class="btn btn-link btn-block text-left collapsed" type="button" data-toggle="collapse"
              data-target="#collapseFour" aria-expanded="false" aria-controls="collapseFour">
              Jueves
            </button>
          </h2>
        </div>
        <div id="collapseFour" class="collapse" aria-labelledby="headingFour" data-parent="#accordionExample">
          <div class="card-body">
            <table class="table table-responsive-lg table-condensed table-hover text-center" id="tabla-sponsor">
              <thead class="thead-light">
                <tr>
                  <th scope="col">Horario</th>
                  <th scope="col">Actividad</th>
                  <th scope="col">Capacidad</th>
                  <th scope="col">Acciones</th>
                </tr>
              </thead>
              <tr>
                {% if page_obj %}
                {% for calendario in page_obj %}
                {% if calendario.dia == "JUEVES" %}
              <tr class="text-center">
                <td>{{calendario.horario_inicio}} - {{calendario.horario_fin}}</td>
                <td>{{calendario.nombre}}</td>
                <td>{{calendario.descripcion}}</td>
                <td>
                  <a href="{% url 'calendario:editar' calendario.id %}" class="btn btn-sm btn-primary">
                    <i class="fas fa-edit "></i></a>
                  <a class="btn btn-sm btn-danger use-modal" data-toggle='modal' data-target="#mainModal"
                    data-url="{% url 'calendario:eliminar' calendario.id %}" href="#">
                    <i class="fas fa-times "></i></a>
                </td>
              </tr>
              {% endif %}
              {% endfor %}
              {% else %}
              <td>
                <h4>
                  Seleccione un gimnasio para mostrar información.
                </h4>
              </td>

              {% endif %}
              </tr>
            </table>
          </div>
        </div>
      </div>
      <div class="card">
        <div class="card-header" id="headingFive">
          <h2 class="mb-0">
            <button class="btn btn-link btn-block text-left collapsed" type="button" data-toggle="collapse"
              data-target="#collapseFive" aria-expanded="false" aria-controls="collapseFive">
              Viernes
            </button>
          </h2>
        </div>
        <div id="collapseFive" class="collapse" aria-labelledby="headingFive" data-parent="#accordionExample">
          <div class="card-body">
            <table class="table table-responsive-lg table-condensed table-hover text-center" id="tabla-sponsor">
              <thead class="thead-light">
                <tr>
                  <th scope="col">Horario</th>
                  <th scope="col">Actividad</th>
                  <th scope="col">Capacidad</th>
                  <th scope="col">Acciones</th>
                </tr>
              </thead>
              <tr>
                {% if page_obj %}
                {% for calendario in page_obj %}
                {% if calendario.dia == "VIERNES" %}
              <tr class="text-center">
                <td>{{calendario.horario_inicio}} - {{calendario.horario_fin}}</td>
                <td>{{calendario.nombre}}</td>
                <td>{{calendario.descripcion}}</td>
                <td>
                  <a href="{% url 'calendario:editar' calendario.id %}" class="btn btn-sm btn-primary">
                    <i class="fas fa-edit "></i></a>
                  <a class="btn btn-sm btn-danger use-modal" data-toggle='modal' data-target="#mainModal"
                    data-url="{% url 'calendario:eliminar' calendario.id %}" href="#">
                    <i class="fas fa-times "></i></a>
                </td>
              </tr>
              {% endif %}
              {% endfor %}
              {% else %}
              <td>
                <h4>
                  Seleccione un gimnasio para mostrar información.
                </h4>
              </td>

              {% endif %}
              </tr>
            </table>
          </div>
        </div>
      </div>
      <div class="card">
        <div class="card-header" id="headingSix">
          <h2 class="mb-0">
            <button class="btn btn-link btn-block text-left collapsed" type="button" data-toggle="collapse"
              data-target="#collapseSix" aria-expanded="false" aria-controls="collapseSix">
              Sábado
            </button>
          </h2>
        </div>
        <div id="collapseSix" class="collapse" aria-labelledby="headingSix" data-parent="#accordionExample">
          <div class="card-body">
            <table class="table table-responsive-lg table-condensed table-hover text-center" id="tabla-sponsor">
              <thead class="thead-light">
                <tr>
                  <th scope="col">Horario</th>
                  <th scope="col">Actividad</th>
                  <th scope="col">Capacidad</th>
                  <th scope="col">Acciones</th>
                </tr>
              </thead>
              <tr>
                {% if page_obj %}
                {% for calendario in page_obj %}
                {% if calendario.dia == "SABADO" %}
              <tr class="text-center">
                <td>{{calendario.horario_inicio}} - {{calendario.horario_fin}}</td>
                <td>{{calendario.nombre}}</td>
                <td>{{calendario.descripcion}}</td>
                <td>
                  <a href="{% url 'calendario:editar' calendario.id %}" class="btn btn-sm btn-primary">
                    <i class="fas fa-edit "></i></a>
                  <a class="btn btn-sm btn-danger use-modal" data-toggle='modal' data-target="#mainModal"
                    data-url="{% url 'calendario:eliminar' calendario.id %}" href="#">
                    <i class="fas fa-times "></i></a>
                </td>
              </tr>
              {% endif %}
              {% endfor %}
              {% else %}
              <td>
                <h4>
                  Seleccione un gimnasio para mostrar información.
                </h4>
              </td>

              {% endif %}
              </tr>
            </table>
          </div>
        </div>
      </div>
      <div class="card">
        <div class="card-header" id="headingSeven">
          <h2 class="mb-0">
            <button class="btn btn-link btn-block text-left collapsed" type="button" data-toggle="collapse"
              data-target="#collapseSeven" aria-expanded="false" aria-controls="collapseSeven">
              Domingo
            </button>
          </h2>
        </div>
        <div id="collapseSeven" class="collapse" aria-labelledby="headingSeven" data-parent="#accordionExample">
          <div class="card-body">
            <table class="table table-responsive-lg table-condensed table-hover text-center" id="tabla-sponsor">
              <thead class="thead-light">
                <tr>
                  <th scope="col">Horario</th>
                  <th scope="col">Actividad</th>
                  <th scope="col">Capacidad</th>
                  <th scope="col">Acciones</th>
                </tr>
              </thead>
              <tr>
                {% if page_obj %}
                {% for calendario in page_obj %}
                {% if calendario.dia == "DOMINGO" %}
              <tr class="text-center">
                <td>{{calendario.horario_inicio}} - {{calendario.horario_fin}}</td>
                <td>{{calendario.nombre}}</td>
                <td>{{calendario.descripcion}}</td>
                <td>
                  <a href="{% url 'calendario:editar' calendario.id %}" class="btn btn-sm btn-primary">
                    <i class="fas fa-edit "></i></a>
                  <a class="btn btn-sm btn-danger use-modal" data-toggle='modal' data-target="#mainModal"
                    data-url="{% url 'calendario:eliminar' calendario.id %}" href="#">
                    <i class="fas fa-times "></i></a>
                </td>
              </tr>
              {% endif %}
              {% endfor %}
              {% else %}
              <td>
                <h4>
                  Seleccione un gimnasio para mostrar información.
                </h4>
              </td>

              {% endif %}
              </tr>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock main %}

{% block specific_scripts %}
<script type="text/javascript" src="{% static 'js/moment.min.js' %}"></script>
<script type="text/javascript" src="{% static 'js/daterangepicker.min.js' %}"></script>
<script type="text/javascript" src="{% static 'js/bootstrap4-toggle.min.js' %}"></script>
<script type="text/javascript" src="{% static 'js/utilsDates.js' %}"></script>
<script type="text/javascript" src="{% static 'js/utilsModal2.js' %}"></script>
<script>
  $(".export").click(function () {
    $("#export").val($(this).data('value'));
    $('form').submit()
  });
  $('button[type="submit"]').click(function (e) {
    $("#export").val('');
  })
</script>

{% endblock %}